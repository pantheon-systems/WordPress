!function(){var n,t={};function e(){}function r(n){return n}function i(n){return!!n}function u(n){return!n}var o="object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global||this;function c(n){return function(){if(null===n)throw new Error("Callback was already called.");n.apply(this,arguments),n=null}}function a(n){return function(){null!==n&&(n.apply(this,arguments),n=null)}}null!=o&&(n=o.async),t.noConflict=function(){return o.async=n,t};var s=Object.prototype.toString,l=Array.isArray||function(n){return"[object Array]"===s.call(n)};function f(n){return l(n)||"number"==typeof n.length&&n.length>=0&&n.length%1==0}function p(n,t){for(var e=-1,r=n.length;++e<r;)t(n[e],e,n)}function h(n,t){for(var e=-1,r=n.length,i=Array(r);++e<r;)i[e]=t(n[e],e,n);return i}function m(n){return h(Array(n),function(n,t){return t})}function y(n,t){p(v(n),function(e){t(n[e],e)})}function d(n,t){for(var e=0;e<n.length;e++)if(n[e]===t)return e;return-1}var v=Object.keys||function(n){var t=[];for(var e in n)n.hasOwnProperty(e)&&t.push(e);return t};function g(n){var t,e,r=-1;return f(n)?(t=n.length,function(){return++r<t?r:null}):(e=v(n),t=e.length,function(){return++r<t?e[r]:null})}function b(n,t){return t=null==t?n.length-1:+t,function(){for(var e=Math.max(arguments.length-t,0),r=Array(e),i=0;i<e;i++)r[i]=arguments[i+t];switch(t){case 0:return n.call(this,r);case 1:return n.call(this,arguments[0],r);case 2:return n.call(this,arguments[0],arguments[1],r)}}}function k(n){return function(t,e,r){return n(t,r)}}var j="function"==typeof setImmediate&&setImmediate,w=j?function(n){j(n)}:function(n){setTimeout(n,0)};function Q(n){return function(t,r,i){i=a(i||e);var u=g(t=t||[]);if(n<=0)return i(null);var o=!1,s=0,l=!1;!function e(){if(o&&s<=0)return i(null);for(;s<n&&!l;){var a=u();if(null===a)return o=!0,void(s<=0&&i(null));s+=1,r(t[a],a,c(function(n){s-=1,n?(i(n),l=!0):e()}))}}()}}function x(n){return function(e,r,i){return n(t.eachOf,e,r,i)}}function T(n){return function(t,e,r,i){return n(Q(e),t,r,i)}}function S(n){return function(e,r,i){return n(t.eachOfSeries,e,r,i)}}function E(n,t,r,i){i=a(i||e);var u=[];n(t,function(n,t,e){r(n,function(n,r){u[t]=r,e(n)})},function(n){i(n,u)})}function O(n,t,e,r){var i=[];n(t,function(n,t,r){e(n,function(e){e&&i.push({index:t,value:n}),r()})},function(){r(h(i.sort(function(n,t){return n.index-t.index}),function(n){return n.value}))})}function I(n,t,e,r){O(n,t,function(n,t){e(n,function(n){t(!n)})},r)}function L(n,t,e){return function(r,i,u,o){function c(){o&&o(e(!1,void 0))}function a(n,r,i){if(!o)return i();u(n,function(r){o&&t(r)&&(o(e(!0,n)),o=u=!1),i()})}arguments.length>3?n(r,i,a,c):(o=u,u=i,n(r,a,c))}}function A(n,t){return t}function C(n,t,r){r=r||e;var i=f(t)?[]:{};n(t,function(n,t,e){n(b(function(n,r){r.length<=1&&(r=r[0]),i[t]=r,e(n)}))},function(n){r(n,i)})}function q(n,t,e,r){var i=[];n(t,function(n,t,r){e(n,function(n,t){i=i.concat(t||[]),r(n)})},function(n){r(n,i)})}function z(n,r,i){if(null==r)r=1;else if(0===r)throw new Error("Concurrency must not be zero");function u(n,r,i,u){if(null!=u&&"function"!=typeof u)throw new Error("task callback must be a function");if(n.started=!0,l(r)||(r=[r]),0===r.length&&n.idle())return t.setImmediate(function(){n.drain()});p(r,function(t){var r={data:t,callback:u||e};i?n.tasks.unshift(r):n.tasks.push(r),n.tasks.length===n.concurrency&&n.saturated()}),t.setImmediate(n.process)}function o(n,t){return function(){a-=1;var e=arguments;p(t,function(n){n.callback.apply(n,e)}),n.tasks.length+a===0&&n.drain(),n.process()}}var a=0,s={tasks:[],concurrency:r,payload:i,saturated:e,empty:e,drain:e,started:!1,paused:!1,push:function(n,t){u(s,n,!1,t)},kill:function(){s.drain=e,s.tasks=[]},unshift:function(n,t){u(s,n,!0,t)},process:function(){if(!s.paused&&a<s.concurrency&&s.tasks.length)for(;a<s.concurrency&&s.tasks.length;){var t=s.payload?s.tasks.splice(0,s.payload):s.tasks.splice(0,s.tasks.length),e=h(t,function(n){return n.data});0===s.tasks.length&&s.empty(),a+=1;var r=c(o(s,t));n(e,r)}},length:function(){return s.tasks.length},running:function(){return a},idle:function(){return s.tasks.length+a===0},pause:function(){s.paused=!0},resume:function(){if(!1!==s.paused){s.paused=!1;for(var n=Math.min(s.concurrency,s.tasks.length),e=1;e<=n;e++)t.setImmediate(s.process)}}};return s}function B(n){return b(function(t,e){t.apply(null,e.concat([b(function(t,e){"undefined"!=typeof console&&(t?console.error&&console.error(t):console[n]&&p(e,function(t){console[n](t)}))})]))})}function M(n){return function(t,e,r){n(m(t),e,r)}}function P(n){return b(function(t,e){var r=b(function(e){var r=this,i=e.pop();return n(t,function(n,t,i){n.apply(r,e.concat([i]))},i)});return e.length?r.apply(this,e):r})}function V(n){return b(function(e){var r=e.pop();e.push(function(){var n=arguments;i?t.setImmediate(function(){r.apply(null,n)}):r.apply(null,n)});var i=!0;n.apply(this,e),i=!1})}"object"==typeof process&&"function"==typeof process.nextTick?t.nextTick=process.nextTick:t.nextTick=w,t.setImmediate=j?w:t.nextTick,t.forEach=t.each=function(n,e,r){return t.eachOf(n,k(e),r)},t.forEachSeries=t.eachSeries=function(n,e,r){return t.eachOfSeries(n,k(e),r)},t.forEachLimit=t.eachLimit=function(n,t,e,r){return Q(t)(n,k(e),r)},t.forEachOf=t.eachOf=function(n,t,r){r=a(r||e);var i=f(n=n||[])?n.length:v(n).length,u=0;if(!i)return r(null);function o(n){n?r(n):(u+=1)>=i&&r(null)}!function(n,t){f(n)?p(n,t):y(n,t)}(n,function(e,r){t(n[r],r,c(o))})},t.forEachOfSeries=t.eachOfSeries=function(n,r,i){i=a(i||e);var u=g(n=n||[]),o=u();!function e(){var a=!0;if(null===o)return i(null);r(n[o],o,c(function(n){if(n)i(n);else{if(null===(o=u()))return i(null);a?t.nextTick(e):e()}})),a=!1}()},t.forEachOfLimit=t.eachOfLimit=function(n,t,e,r){Q(t)(n,e,r)},t.map=x(E),t.mapSeries=S(E),t.mapLimit=T(E),t.inject=t.foldl=t.reduce=function(n,e,r,i){t.eachOfSeries(n,function(n,t,i){r(e,n,function(n,t){e=t,i(n)})},function(n){i(n||null,e)})},t.foldr=t.reduceRight=function(n,e,r,i){var u=h(n,function(n){return n}).reverse();t.reduce(u,e,r,i)},t.select=t.filter=x(O),t.selectLimit=t.filterLimit=T(O),t.selectSeries=t.filterSeries=S(O),t.reject=x(I),t.rejectLimit=T(I),t.rejectSeries=S(I),t.any=t.some=L(t.eachOf,i,r),t.someLimit=L(t.eachOfLimit,i,r),t.all=t.every=L(t.eachOf,u,u),t.everyLimit=L(t.eachOfLimit,u,u),t.detect=L(t.eachOf,r,A),t.detectSeries=L(t.eachOfSeries,r,A),t.sortBy=function(n,e,r){function i(n,t){var e=n.criteria,r=t.criteria;return e<r?-1:e>r?1:0}t.map(n,function(n,t){e(n,function(e,r){e?t(e):t(null,{value:n,criteria:r})})},function(n,t){if(n)return r(n);r(null,h(t.sort(i),function(n){return n.value}))})},t.auto=function(n,r){r=a(r||e);var i=v(n),u=i.length;if(!u)return r(null);var o={},c=[];function s(n){c.unshift(n)}function f(){u--,p(c.slice(0),function(n){n()})}s(function(){u||r(null,o)}),p(i,function(e){for(var i,u=l(n[e])?n[e]:[n[e]],a=b(function(n,i){if(i.length<=1&&(i=i[0]),n){var u={};y(o,function(n,t){u[t]=n}),u[e]=i,r(n,u)}else o[e]=i,t.setImmediate(f)}),h=u.slice(0,u.length-1),m=h.length;m--;){if(!(i=n[h[m]]))throw new Error("Has inexistant dependency");if(l(i)&&d(i,e)>=0)throw new Error("Has cyclic dependencies")}function v(){return n=function(n,t){return n&&o.hasOwnProperty(t)},t=!0,p(h,function(e,r,i){t=n(t,e,r,i)}),t&&!o.hasOwnProperty(e);var n,t}v()?u[u.length-1](a,o):s(function n(){v()&&((t=d(c,n))>=0&&c.splice(t,1),u[u.length-1](a,o));var t})})},t.retry=function(n,e,r){var i=5,u=0,o=[],c={times:i,interval:u};var a=arguments.length;if(a<1||a>3)throw new Error("Invalid arguments - must be either (task), (task, callback), (times, task) or (times, task, callback)");function s(n,e){function r(n,t){return function(r){n(function(n,e){r(!n||t,{err:n,result:e})},e)}}function i(n){return function(t){setTimeout(function(){t(null)},n)}}for(;c.times;){var u=!(c.times-=1);o.push(r(c.task,u)),!u&&c.interval>0&&o.push(i(c.interval))}t.series(o,function(t,e){e=e[e.length-1],(n||c.callback)(e.err,e.result)})}return a<=2&&"function"==typeof n&&(r=e,e=n),"function"!=typeof n&&function(n,t){if("number"==typeof t)n.times=parseInt(t,10)||i;else{if("object"!=typeof t)throw new Error("Unsupported argument type for 'times': "+typeof t);n.times=parseInt(t.times,10)||i,n.interval=parseInt(t.interval,10)||u}}(c,n),c.callback=r,c.task=e,c.callback?s():s},t.waterfall=function(n,r){if(r=a(r||e),!l(n)){var i=new Error("First argument to waterfall must be an array of functions");return r(i)}if(!n.length)return r();!function n(t){return b(function(e,i){if(e)r.apply(null,[e].concat(i));else{var u=t.next();u?i.push(n(u)):i.push(r),V(t).apply(null,i)}})}(t.iterator(n))()},t.parallel=function(n,e){C(t.eachOf,n,e)},t.parallelLimit=function(n,t,e){C(Q(t),n,e)},t.series=function(n,e){C(t.eachOfSeries,n,e)},t.iterator=function(n){return function t(e){function r(){return n.length&&n[e].apply(null,arguments),r.next()}return r.next=function(){return e<n.length-1?t(e+1):null},r}(0)},t.apply=b(function(n,t){return b(function(e){return n.apply(null,t.concat(e))})}),t.concat=x(q),t.concatSeries=S(q),t.whilst=function(n,t,r){if(r=r||e,n()){var i=b(function(e,u){e?r(e):n.apply(this,u)?t(i):r(null)});t(i)}else r(null)},t.doWhilst=function(n,e,r){var i=0;return t.whilst(function(){return++i<=1||e.apply(this,arguments)},n,r)},t.until=function(n,e,r){return t.whilst(function(){return!n.apply(this,arguments)},e,r)},t.doUntil=function(n,e,r){return t.doWhilst(n,function(){return!e.apply(this,arguments)},r)},t.during=function(n,t,r){r=r||e;var i=b(function(t,e){t?r(t):(e.push(u),n.apply(this,e))}),u=function(n,e){n?r(n):e?t(i):r(null)};n(u)},t.doDuring=function(n,e,r){var i=0;t.during(function(n){i++<1?n(null,!0):e.apply(this,arguments)},n,r)},t.queue=function(n,t){return z(function(t,e){n(t[0],e)},t,1)},t.priorityQueue=function(n,r){function i(n,t){return n.priority-t.priority}var u=t.queue(n,r);return u.push=function(n,r,o){!function(n,r,u,o){if(null!=o&&"function"!=typeof o)throw new Error("task callback must be a function");if(n.started=!0,l(r)||(r=[r]),0===r.length)return t.setImmediate(function(){n.drain()});p(r,function(r){var c={data:r,priority:u,callback:"function"==typeof o?o:e};n.tasks.splice(function(n,t,e){for(var r=-1,i=n.length-1;r<i;){var u=r+(i-r+1>>>1);e(t,n[u])>=0?r=u:i=u-1}return r}(n.tasks,c,i)+1,0,c),n.tasks.length===n.concurrency&&n.saturated(),t.setImmediate(n.process)})}(u,n,r,o)},delete u.unshift,u},t.cargo=function(n,t){return z(n,1,t)},t.log=B("log"),t.dir=B("dir"),t.memoize=function(n,e){var r={},i={};e=e||function(n){return n};var u=b(function(u){var o=u.pop(),c=e.apply(null,u);c in r?t.nextTick(function(){o.apply(null,r[c])}):c in i?i[c].push(o):(i[c]=[o],n.apply(null,u.concat([b(function(n){r[c]=n;var t=i[c];delete i[c];for(var e=0,u=t.length;e<u;e++)t[e].apply(null,n)})])))});return u.memo=r,u.unmemoized=n,u},t.unmemoize=function(n){return function(){return(n.unmemoized||n).apply(null,arguments)}},t.times=M(t.map),t.timesSeries=M(t.mapSeries),t.timesLimit=function(n,e,r,i){return t.mapLimit(m(n),e,r,i)},t.seq=function(){var n=arguments;return b(function(r){var i=this,u=r[r.length-1];"function"==typeof u?r.pop():u=e,t.reduce(n,r,function(n,t,e){t.apply(i,n.concat([b(function(n,t){e(n,t)})]))},function(n,t){u.apply(i,[n].concat(t))})})},t.compose=function(){return t.seq.apply(null,Array.prototype.reverse.call(arguments))},t.applyEach=P(t.eachOf),t.applyEachSeries=P(t.eachOfSeries),t.forever=function(n,t){var r=c(t||e),i=V(n);!function n(t){if(t)return r(t);i(n)}()},t.ensureAsync=V,t.constant=b(function(n){var t=[null].concat(n);return function(n){return n.apply(this,t)}}),t.wrapSync=t.asyncify=function(n){return b(function(t){var e,r=t.pop();try{e=n.apply(this,t)}catch(n){return r(n)}r(null,e)})},"undefined"!=typeof module&&module.exports?module.exports=t:"undefined"!=typeof define&&define.amd?define([],function(){return t}):o.async=t}();var conversationPos,DEBUG=!1,context={};function getCurrentTime(){var n=new Date,t=n.getHours(),e=n.getMinutes(),r=t>=12?"PM":"AM";return(t=(t%=12)||12)+":"+(e=e<10?"0"+e:e)+" "+r}function renderStatement(n){jQuery(".chat-container").append('<div class="chat-message-wrapper"><div class="absolute-wrapper"><div class="message-details"><div class="bot-avatar"></div><span class="message-date">'+getCurrentTime()+'</span></div></div><p class="chat-message">'+n+"</p></div>")}function showTyping(){jQuery(".chat-container").append('<div class="typing-wrapper"><div class="bot-avatar"></div><span class="bot-name">'+botName+'</span><p class="chat-message typing"><span class="dot"></span><span class="dot"></span><span class="dot"></span></p></div>')}function hideTyping(){jQuery(".typing-wrapper").remove()}var chatWrapper=jQuery(".bot-chat-wrapper");function scrollToBottom(){chatWrapper.animate({scrollTop:600},"slow")}function inputError(n){jQuery(".bot-error p").text(n),jQuery(".bot-error").animate({bottom:0},500).delay(3e3).animate({bottom:"-70px"},500)}function checkInput(n){return jQuery(".bot-container input[type=text]").val().length>2?showResponse(n):inputError(botVars.validationName),!1}function checkEmail(n){let t=jQuery(".bot-container input[type=email]").val(),e=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(t.toLowerCase()));if(t.length>7&&!0===e){var r="action=wpmm_add_subscriber&"+jQuery(".bot-container input[type=email]").serialize();jQuery.post(wpmm_vars.ajax_url,r,function(n){if(!n.success)return alert(n.data),!1},"json"),showResponse(n)}else inputError(botVars.validationEmail);return!1}function clearChat(){jQuery(".chat-container").empty()}function clearFooter(){jQuery(".choices").empty(),jQuery(".input").empty()}function startConversation(n,t){clearFooter(),clearChat(),conversationPos=n,jQuery.getScript(botVars.uploadsBaseUrl+"data.js",function(n){showStatement(t)})}function showStatement(n){var t,e=conversationData[conversationPos][n];"sideeffect"in e&&jQuery.type("function"===e.sideeffect)&&e.sideeffect(context),"array"===jQuery.type(e.statement)?t=e.statement:"string"===jQuery.type(e.statement)?t=[e.statement]:"function"===jQuery.type(e.statement)&&(t=e.statement(context)),async.eachSeries(t,function(n,t){if(showTyping(),scrollToBottom(),n.length<=50)var e=1800;else e=n.length/3*30*(Math.floor(5*Math.random())+1.2);DEBUG&&(e=0),setTimeout(function(){hideTyping(),renderStatement(n),scrollToBottom(),t()},e)},function(n){if("options"in e){jQuery(".input").hide(),jQuery(".choices").show();var t=e.options;t.length>0&&setTimeout(function(){for(var n=0;n<t.length;n++){var e,r=t[n];null===r.consequence?(e=null,"disabled"):(e=function(n){showResponse(n)}.bind(null,r),"");jQuery("<p/>",{text:r.choice,class:"chat-message user",click:e}).appendTo(".choices")}},750)}else if("input"in e){jQuery(".input").show(),jQuery(".choices").hide();var r=e.input,i=jQuery("<form/>",{submit:checkInput.bind(null,r)}),u=jQuery("<p/>",{class:"chat-message user"}).appendTo(i),o=jQuery("<input/>",{type:"text",placeholder:botVars.typeName,name:r.name,autocomplete:"off",required:!0}).appendTo(u);jQuery("<a/>",{text:"Send",click:checkInput.bind(null,r)}).appendTo(u);i.appendTo(".input"),async.nextTick(function(){o.focus()})}else if("email"in e){jQuery(".input").show(),jQuery(".choices").hide();r=e.email,i=jQuery("<form/>",{class:"bot_subscribe_form",submit:checkEmail.bind(null,r)}),u=jQuery("<p/>",{class:"chat-message user"}).appendTo(i),o=jQuery("<input/>",{type:"email",placeholder:botVars.typeEmail,name:r.email,autocomplete:"off"}).appendTo(u),jQuery("<a/>",{text:botVars.send,click:checkEmail.bind(null,r)}).appendTo(u);i.appendTo(".input"),async.nextTick(function(){o.focus()})}scrollToBottom()})}function showResponse(n){var t="";"name"in n?(context[n.name]=jQuery(".bot-container input[type=text]").val(),t=context[n.name]):"email"in n?(context[n.email]=jQuery(".bot-container input[type=email]").val(),t=context[n.email]):t=n.choice,clearFooter(),jQuery(".chat-container").append('<p class="chat-message user">'+t+"</p>"),"consequence"in n&&showStatement(n.consequence)}