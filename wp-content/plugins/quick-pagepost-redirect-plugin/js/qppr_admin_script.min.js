function qppr_check_file(e){str=e.value.toUpperCase(),suffix=".TXT",-1===str.indexOf(suffix,str.length-suffix.length)&&(alert(qpprData.msgFileType),e.value="")}function qppr_goOnConfirm(e,r){confirm(e)&&(document.location.href=qpprData.adminURL+r)}!function(e,r,t){e(r).ready(function(){e("span.qppr_meta_help").css("display","none"),e(".inside").delegate("span.qppr_meta_help_wrap","hover",function(r){var t=e(this).find("span.qppr_meta_help").css("display");"none"==t?e(this).find("span.qppr_meta_help").css("display","inline"):e(this).find("span.qppr_meta_help").css("display","none"),r.preventDefault()});t.ajaxurl;e("#pprredirect_type").on("change",function(r){r.preventDefault(),e(".qppr-meta-section-wrapper").removeClass("meta-selected meta-not-selected");var t=e(this).val();"meta"==t?e(".qppr-meta-section-wrapper").slideDown("slow"):e(".qppr-meta-section-wrapper").slideUp("slow")}),e(".qppr-delete-everything").on("click",function(p){if(p.preventDefault(),confirm(t.msgAllDeleteConfirm)){var n={action:"qppr_delete_all_settings",security:t.securityDelete};e.post(t.ajaxurl,n,function(e){r.location.href="success"==e?t.adminURL+"?page=redirect-options&update=6":t.adminURL+"?page=redirect-options&update=0"})}}),e(".qppr-delete-regular").on("click",function(p){if(p.preventDefault(),confirm(t.msgIndividualDeleteConfirm)){var n={action:"qppr_delete_all_iredirects",security:t.securityDelete};e.post(t.ajaxurl,n,function(e){r.location.href="success"==e?t.adminURL+"?page=redirect-options&update=2":t.adminURL+"?page=redirect-options&update=0"})}}),e(".qppr-delete-quick").on("click",function(p){if(p.preventDefault(),confirm(t.msgQuickDeleteConfirm)){var n={action:"qppr_delete_all_qredirects",security:t.securityDelete};e.post(t.ajaxurl,n,function(e){r.location.href="success"==e?t.adminURL+"?page=redirect-options&update=3":t.adminURL+"?page=redirect-options&update=0"})}}),e("#qppr_quick_save_form").on("submit",function(r){var p=(e(this),e('input[name^="quickppr_redirects[request]"')),n=e('input[name^="quickppr_redirects[destination]"'),i=!1;return""==p[0].value&&""==n[0].value&&(i=!0),i?(r.preventDefault(),alert(t.error),!1):!0}),e("#qppr_quick_save_form").delegate(".delete-qppr","click",function(r){r.preventDefault();var p=e(this).data("rowid"),n=e("#"+p).children(".table-qppr-req").children(".qppr-request").text(),i={action:"qppr_delete_quick_redirect",request:n,security:t.security},a=1;confirm(t.msgDeleteConfirm)&&e.post(t.ajaxurl,i,function(){e("#"+p).remove()}).done(function(){e(".qppr-count-row").each(function(){e(this).text(a+"."),a++})})}),e(".edit-qppr").click(function(r){r.preventDefault();var t=e(this).data("rowid"),p=e("#"+t),n=e("#qppr-edit-row-holder").children("td");e("#"+t+" td").addClass("editing"),p.addClass("editing-redirect"),n.clone().prependTo(p);var i="X"==p.children(".table-qppr-nwn.editing").children(".qppr-newindow").text()?!0:!1,a="X"==p.children(".table-qppr-nfl.editing").children(".qppr-nofollow").text()?!0:!1;p.children(".table-qppr-req.cloned").children(".input-qppr-req").attr("value",p.children(".table-qppr-req.editing").children(".qppr-request").text()),p.children(".table-qppr-des.cloned").children(".input-qppr-dest").attr("value",p.children(".table-qppr-des.editing").children(".qppr-destination").text()),p.children(".table-qppr-nwn.cloned").children(".input-qppr-neww").prop("checked",i),p.children(".table-qppr-nfl.cloned").children(".input-qppr-nofo").prop("checked",a),p.children(".table-qppr-sav.cloned").children(".table-qppr-sav span").attr("data-rowid",t),p.children(".table-qppr-can.cloned").children(".table-qppr-can span").attr("data-rowid",t)}),e(".qppr_quick_redirects_wrapper").delegate(".table-qppr-sav span.qpprfont-save","hover",function(){0==e(".active-saving").length||e(this).parent().parent().hasClass("active-saving")||e(this).css({cursor:"no-drop",color:"#ff0000"})}),e(".qppr_quick_redirects_wrapper").delegate(".table-qppr-sav span.qpprfont-save","click",function(r){if(r.preventDefault(),0!=e(".active-saving").length&&!e(this).parent().parent().hasClass("active-saving"))return!1;var p=e("#"+e(this).data("rowid")),n=e(this).data("rowid"),i=p.children(".table-qppr-req.editing").children(".qppr-request").data("qppr-orig-url"),a=p.children(".table-qppr-req.cloned").children(".input-qppr-req").val(),l=p.children(".table-qppr-des.cloned").children(".input-qppr-dest").val(),c=p.children(".table-qppr-nwn.cloned").children(".input-qppr-neww:checked").val(),d=p.children(".table-qppr-nfl.cloned").children(".input-qppr-nofo:checked").val();c="undefined"==typeof c||"undefined"==c?0:c,d="undefined"==typeof d||"undefined"==d?0:d,p.children(".cloned").remove();var s=t.protocols,o=a.substring(0,1),u="/"==o?!0:!1,q="",f=-1;u||(f=a.indexOf(":"),q=a.substring(0,f)),u||-1!==e.inArray(q,s)||(a="/"+a),e("#qppr-edit-row-saving .qppr-saving-row").clone().prependTo("#"+n),p.addClass("active-saving");var h={action:"qppr_save_quick_redirect",row:n.replace("rowpprdel-",""),original:i,request:a,destination:l,newwin:c,nofollow:d,security:t.security};e.post(t.ajaxurl,h,function(r){var n=0;if("error"==r&&(alert(t.msgErrorSave),n=1),"duplicate"==r){alert(t.msgDuplicate);var s="#"+e(".table-qppr-req:contains("+a+")").parent("tr").attr("id");e(s).addClass("qppr-duplicate"),n=1}1!=n&&(d=1==d?"X":"",c=1==c?"X":"",p.children(".table-qppr-req.editing").children(".qppr-request").text(a),p.children(".table-qppr-des.editing").children(".qppr-destination").text(l),p.children(".table-qppr-nfl.editing").children(".qppr-nofollow").text(d),p.children(".table-qppr-nwn.editing").children(".qppr-newindow").text(c),p.children(".table-qppr-req.editing").children(".qppr-request").data("qppr-orig-url",i)),p.children("td").removeClass("editing"),p.children(".qppr-saving-row").remove()}).done(function(){p.removeClass("editing-redirect active-saving"),e(".table-qppr-sav span.qpprfont-save").css({cursor:"",color:""})})}),e('tr[id^="rowpprdel"]').on("hover",function(){e(this).removeClass("qppr-duplicate")}),e(".qppr_quick_redirects_wrapper").delegate(".table-qppr-can span.qpprfont-cancel","click",function(r){r.preventDefault();var t=e("#"+e(this).data("rowid"));t.children(".cloned").remove(),t.children("td").removeClass("editing"),t.removeClass("editing-redirect")}),e("#hidepprjqmessage").click(function(r){r.preventDefault();var p={action:"qppr_pprhidemessage_ajax",pprhidemessage:1,scid:t.security};e.post(t.ajaxurl,p,function(){e("#usejqpprmessage").remove()}).done(function(){})}),e("#hidepprjqmessage2").click(function(r){r.preventDefault();var p={action:"qppr_pprhidemessage_ajax",pprhidemessage:2,scid:t.security};e.post(t.ajaxurl,p,function(){e("#usejqpprmessage2").remove()}).done(function(){})}),e("#qppr-import-quick-redirects-button").click(function(r){r.preventDefault(),e("#qppr_addto_form").css({display:"none"}),e("#qppr_import_form").css("block"==e("#qppr_import_form").css("display")?{display:"none"}:{display:"block"})}),e("#qppr_addto_qr_button").click(function(r){e("#qppr_import_form").css({display:"none"}),e("#qppr_addto_form").css("block"==e("#qppr_addto_form").css("display")?{display:"none"}:{display:"block"}),r.preventDefault()}),e("#import_redirects_add_qppr").click(function(r){return""==e("[name|=qppr_file_add]").attr("value")?(r.preventDefault(),alert(t.msgSelect),!1):void 0}),e("#import-quick-redrects-file").click(function(r){return""==e("[name|=qppr_file]").attr("value")?(r.preventDefault(),alert(t.msgSelect),!1):void 0})})}(jQuery,document,qpprData);