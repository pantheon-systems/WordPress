!function(a,b){function c(a){return h=a.find("td.file_name input.input_text"),i=a.find("td.file_url input.input_text"),void 0!==f?void f.open():(f=wp.media.frames.file_frame=wp.media({title:as3cf_woo.strings.media_modal_title,button:{text:as3cf_woo.strings.media_modal_button},states:[new wp.media.controller.Library({title:as3cf_woo.strings.media_modal_title,filterable:"all",multiple:!1})]}),f.on("select",function(){g=f.state().get("selection").first().toJSON(),j=h.attr("placeholder"),k=i.attr("placeholder"),h.val("").attr("placeholder",as3cf_woo.strings.input_placeholder),i.val("").attr("placeholder",as3cf_woo.strings.input_placeholder),d()}),f.on("ready",function(){f.uploader.options.uploader.params={type:"downloadable_product"}}),void f.open())}function d(){wp.ajax.post("as3cf_woo_is_amazon_provider_attachment",{_nonce:as3cf_woo.nonces.is_amazon_provider_attachment,attachment_id:g.id}).done(b.bind(e,this))}function e(a){var c=g.url;if(a){var d=b.template('[amazon_s3 id="<%= id %>"]');c=d({id:g.id})}h.val(g.title).attr("placeholder",j).trigger("change"),i.val(c).attr("placeholder",k).trigger("change")}var f,g,h,i,j,k;a(document).ready(function(){a(document).off("click",".upload_file_button"),a(document.body).off("click",".upload_file_button"),a(document).on("click",".upload_file_button",function(b){var d=a(this).closest("tr");b.preventDefault(),c(d)})})}(jQuery,_);