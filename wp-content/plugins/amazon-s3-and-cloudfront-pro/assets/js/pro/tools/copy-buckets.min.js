!function(a,b){as3cfpro.Tools=as3cfpro.Tools?as3cfpro.Tools:{},as3cfpro.Tools.CopyBuckets={modalContainer:".as3cf-copy-buckets-prompt",showPrompt:function(){b.setDismissibleState(!1),b.open(this.modalContainer)},hidePrompt:function(){this.unsetLoadingState(),b.setDismissibleState(!0),b.close()},handlePromptResponse:function(b){var c=a(b.target).data("copy-buckets");return 0===c?void this.hidePrompt():(this.setLoadingState(),void this.startBackgroundTool())},setLoadingState:function(){b.setLoadingState(!0),a(this.modalContainer+" [data-copy-buckets]").prop("disabled",!0).siblings(".spinner").css("visibility","visible").show()},unsetLoadingState:function(){b.setLoadingState(!1),a(this.modalContainer+" [data-copy-buckets]").prop("disabled",!1).siblings(".spinner").css("visibility","hidden").hide()},startBackgroundTool:function(){var b=this;a.ajax({url:ajaxurl,type:"POST",dataType:"JSON",data:{nonce:as3cfpro.nonces.tools.copy_buckets.start,action:"as3cfpro_copy_buckets_start"},success:function(a){a.success?(as3cfpro.Tools.CopyBuckets.hidePrompt(),as3cfpro.Tools.CopyBuckets.lockBucketSelect()):b.showErrorPrompt()},error:function(a,c,d){console.log(a,c,d),b.showErrorPrompt()}})},showErrorPrompt:function(){confirm(as3cfpro.strings.tools.copy_buckets.error),this.unsetLoadingState()},toggleBucketSelect:function(a){return a.is_queued||a.is_paused||a.is_cancelled?void this.lockBucketSelect():void this.unlockBucketSelect()},lockBucketSelect:function(){a("a.as3cf-change-provider").hide(),a("a.as3cf-change-bucket").hide(),a("#as3cf-bucket-select-locked").show()},unlockBucketSelect:function(){a("a.as3cf-change-provider").show(),a("a.as3cf-change-bucket").show(),a("#as3cf-bucket-select-locked").hide()}},a(document).ready(function(){null!=as3cfpro.Sidebar.tools.media.copy_buckets&&as3cfpro.Tools.CopyBuckets.toggleBucketSelect(as3cfpro.Sidebar.tools.media.copy_buckets),a("#copy_buckets").on("status-change",function(a,b){as3cfpro.Tools.CopyBuckets.toggleBucketSelect(b)})})}(jQuery,as3cfModal);